version: 0.1
metadata:
  owner: jamesbrink
  source: config/hotkeys.yaml
  description: >
    Canonical hotkey manifest for Omarchy-style hosts. themectl will consume
    this file to render SKHD, Hammerspoon, Hyprland, and Walker configs so macOS
    BSP/native and Linux stay aligned without drift.
  targets:
    - skhd
    - hammerspoon
    - hyprland
    - walker
    - themectl

actions:
  theme:
    cycle:
      description: Cycle the active theme and trigger reload hooks.
      command: "themectl cycle --direction {next|prev}"
      tags: [theme, automation]
    picker:
      description: Walker menu that shells into `themectl apply <slug>`.
      command: "~/.local/bin/theme-picker"
      tags: [theme, walker]
  macos_mode:
    toggle:
      description: Toggle between BSP tiling and native macOS window management.
      command: "themectl macos-mode toggle"
      macos_only: true
      tags: [macos, automation]
  launcher:
    terminal:
      description: Spawn terminal in the focused workspace's CWD.
      commands:
        darwin: "alacritty-cwd-launch"
        linux: "spawn-terminal-here"
    walker:
      description: Open Walker/Rofi-style launcher.
      command: "walker"
    browser:
      default:
        description: Launch the default Chromium browser window.
        commands:
          darwin: 'open -a "Google Chrome"'
          linux: "google-chrome-stable"
      incognito:
        description: Launch an incognito/private browser window.
        commands:
          darwin: 'open -na "Google Chrome" --args --incognito'
          linux: "google-chrome-stable --incognito"
  workspace:
    focus:
      description: Focus workspace/Space by number.
      template:
        chord: "{mod}+{digit}"
        digits: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "0"]
    move:
      description: Move the focused window to a workspace/Space.
      template:
        chord: "{mod}+shift+{digit}"
        digits: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "0"]
  screenshot:
    full_save:
      description: Capture the entire display to clipboard AND disk.
      commands:
        darwin: "macos-screenshot full --both"
        linux: "screenshot-direct output"
    region_save:
      description: Capture a selection to clipboard AND disk.
      commands:
        darwin: "macos-screenshot selection --both"
        linux: "screenshot-annotate region"
    full_clipboard:
      description: Capture the entire display to clipboard AND disk.
      commands:
        darwin: "macos-screenshot full --both"
        linux: "screenshot-direct output --clipboard"
    region_clipboard:
      description: Capture a selection to clipboard AND disk.
      commands:
        darwin: "macos-screenshot selection --both"
        linux: "screenshot-annotate region --clipboard"
    ui:
      description: Open the Screenshot.app UI for interactive capture.
      commands:
        darwin: "macos-screenshot ui"
        linux: null # Linux doesn't have equivalent
  window:
    close:
      description: Close the focused window.
      command: "yabai -m window --close"
    float:
      toggle:
        description: Toggle floating for the focused window.
        command: "yabai -m window --toggle float"
    fullscreen:
      toggle:
        description: Toggle Yabai zoom fullscreen.
        command: "yabai -m window --toggle zoom-fullscreen"
    native_fullscreen:
      toggle:
        description: Toggle native macOS fullscreen.
        command: "yabai -m window --toggle native-fullscreen"
    split:
      toggle:
        description: Toggle split orientation.
        command: "yabai -m window --toggle split"
    focus:
      west:
        description: Focus window to the west.
        command: "yabai -m window --focus west"
      east:
        description: Focus window to the east.
        command: "yabai -m window --focus east"
      north:
        description: Focus window to the north.
        command: "yabai -m window --focus north"
      south:
        description: Focus window to the south.
        command: "yabai -m window --focus south"
    swap:
      west:
        description: Swap with window to the west.
        commands:
          darwin: "yabai -m window --swap west"
          linux: "hyprctl dispatch movewindow l"
      east:
        description: Swap with window to the east.
        commands:
          darwin: "yabai -m window --swap east"
          linux: "hyprctl dispatch movewindow r"
      north:
        description: Swap with window to the north.
        commands:
          darwin: "yabai -m window --swap north"
          linux: "hyprctl dispatch movewindow u"
      south:
        description: Swap with window to the south.
        commands:
          darwin: "yabai -m window --swap south"
          linux: "hyprctl dispatch movewindow d"
    resize:
      horizontal:
        decrease:
          description: Shrink horizontally.
          command: "yabai -m window --resize right:-40:0 || yabai -m window --resize left:-40:0"
        increase:
          description: Grow horizontally.
          command: "yabai -m window --resize right:40:0 || yabai -m window --resize left:40:0"
      vertical:
        decrease:
          description: Shrink vertically.
          command: "yabai -m window --resize bottom:0:-40 || yabai -m window --resize top:0:-40"
        increase:
          description: Grow vertically.
          command: "yabai -m window --resize bottom:0:40 || yabai -m window --resize top:0:40"
  space:
    cycle:
      next:
        description: Focus next space (wraps).
        command: "yabai -m space --focus next || yabai -m space --focus first"
      prev:
        description: Focus previous space (wraps).
        command: "yabai -m space --focus prev || yabai -m space --focus last"
  window_cycle:
    next:
      description: Focus next window (wraps).
      command: "yabai -m window --focus next || yabai -m window --focus first"
    prev:
      description: Focus previous window (wraps).
      command: "yabai -m window --focus prev || yabai -m window --focus last"
  layout:
    rotate:
      description: Rotate BSP tree 90Â°.
      command: "yabai -m space --rotate 90"
    mirror:
      x:
        description: Mirror layout over X axis.
        commands:
          darwin: null # Disabled on macOS (conflicts with cmd+x cut)
          linux: "hyprctl dispatch togglesplit"
      y:
        description: Mirror layout over Y axis.
        command: "yabai -m space --mirror y-axis"
    balance:
      description: Balance all window sizes.
      command: "yabai -m space --balance"
  wm:
    restart:
      description: Restart yabai/skhd services.
      command: 'launchctl kickstart -k "gui/${UID}/org.nixos.yabai"; launchctl kickstart -k "gui/${UID}/org.nixos.skhd"; sleep 1; sudo yabai --load-sa 2>/dev/null || true; osascript -e ''display notification "Restarted window manager" with title "Yabai"'''
    reload:
      description: Stop and start yabai service.
      command: "yabai --stop-service && yabai --start-service"

platforms:
  darwin:
    default_mode: bsp
    targets: [skhd, hammerspoon]
    notes: >
      Cmd+Shift+T lives in Hammerspoon to keep theme automation + notifications
      in one daemon. SKHD owns core tiling bindings and defer to this manifest.
    modes:
      bsp:
        bindings:
          theme.cycle: "cmd+shift+ctrl+space"
          macos_mode.toggle: "cmd+shift+space"
          launcher.terminal: "cmd+return"
          launcher.walker: "cmd+d"
          launcher.browser.default: "cmd+shift+b"
          launcher.browser.incognito: "cmd+shift+alt+b"
          screenshot.full_save: "cmd+shift+ctrl+1"
          screenshot.region_save: "cmd+shift+ctrl+2"
          screenshot.full_clipboard: "cmd+shift+ctrl+3"
          screenshot.region_clipboard: "cmd+shift+ctrl+4"
          screenshot.ui: "cmd+shift+ctrl+5"
          window.close: "cmd+w"
          window.float.toggle: null
          window.fullscreen.toggle: "cmd+f"
          window.native_fullscreen.toggle: "cmd+ctrl+f"
          window.split.toggle: "cmd+j"
          window.focus.west: "cmd+left"
          window.focus.east: "cmd+right"
          window.focus.north: "cmd+up"
          window.focus.south: "cmd+down"
          window.swap.west: "cmd+shift+left"
          window.swap.east: "cmd+shift+right"
          window.swap.north: "cmd+shift+up"
          window.swap.south: "cmd+shift+down"
          window.resize.horizontal.decrease: "cmd+0x1B"
          window.resize.horizontal.increase: "cmd+0x18"
          window.resize.vertical.decrease: "cmd+shift+0x1B"
          window.resize.vertical.increase: "cmd+shift+0x18"
          space.cycle.next: "cmd+tab"
          space.cycle.prev: "cmd+shift+tab"
          window_cycle.next: "alt+tab"
          window_cycle.prev: "alt+shift+tab"
          layout.rotate: "cmd+r"
          layout.mirror.x: "cmd+x"
          layout.mirror.y: "cmd+y"
          layout.balance: "cmd+e"
          wm.restart: "cmd+ctrl+r"
          wm.reload: "cmd+ctrl+q"
          workspace.focus:
            chord: "cmd+{digit}"
          workspace.move:
            chord: "cmd+shift+{digit}"
      native:
        inherits: bsp
        notes: >
          Same bindings as BSP, but scripts may disable yabai/skhd and fall back
          to the stock macOS behaviors. themectl macos-mode <native> manages the
          transitions.

  linux-hyprland:
    default_mode: tiling
    targets: [hyprland, walker]
    bindings:
      theme.cycle: "super+ctrl+alt+t"
      theme.picker: "super+shift+ctrl+space"
      launcher.terminal: "super+return"
      launcher.walker: "super+space"
      launcher.browser.default: "super+shift+b"
      launcher.browser.incognito: "super+shift+alt+b"
      screenshot.region_save: "super+s"
      screenshot.region_clipboard: "super+ctrl+s"
      window.swap.west: "super+shift+left"
      window.swap.east: "super+shift+right"
      window.swap.north: "super+shift+up"
      window.swap.south: "super+shift+down"
      workspace.focus:
        chord: "super+{digit}"
      workspace.move:
        chord: "super+shift+{digit}"
